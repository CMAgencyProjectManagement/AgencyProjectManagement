<div class="card">
  <div class="card-header">
    Task detail
  </div>
  <app-spinner *ngIf=loading.page></app-spinner>
  <div *ngIf=!loading.page class="card-body row">
    <div class="col-12">
      <h2 class="card-title">{{foundTask.name}}</h2>
    </div>
    <div class="col-12">
      <div class="button-row">
        <button class="btn btn-secondary bg-light">
          <i class="fa fa-edit"></i>&nbsp; Edit
        </button>
        <button class="btn btn-secondary bg-light">
          <i class="fa fa-comment-o"></i>&nbsp; Comment
        </button>
        <button class="btn btn-secondary bg-light">
          <i class="fa fa-upload"></i>&nbsp; Upload
        </button>
        <button class="btn btn-secondary bg-light">
          <i class="fa fa-check"></i>&nbsp; Done
        </button>
      </div>
    </div>
    <div class="col-12 mt-5">
      <div class="row">
        <div class="col-6 left-pane">
          <div class="section">
            <!--DETAIL SECTION-->
            <h5 class="mb-3">Detail</h5>
            <dl class="row ml-1">
              <dt class="col-3">Project:</dt>
              <dd class="col-9"><a
                href="#/project/task?projectID={{foundTask.project.id}}">{{foundTask.project.name}}</a></dd>
              <dt class="col-3">List:</dt>
              <dd class="col-9">{{foundTask.list.name}}</dd>
              <dt class="col-3">Priority:</dt>
              <dd class="col-9" [ngSwitch]="foundTask.priority">
                <span *ngSwitchCase="0">Low</span>
                <span *ngSwitchCase="1">Medium</span>
                <span *ngSwitchCase="2">High</span>
              </dd>
              <dt class="col-3">Status:</dt>
              <dd class="col-9" [ngSwitch]="foundTask.status">
                <span *ngSwitchCase="0">Not started</span>
                <span *ngSwitchCase="1">Executing</span>
                <span *ngSwitchCase="2">Done</span>
              </dd>
              <dt class="col-3">Effort:</dt>
              <dd class="col-9">
                {{foundTask.effort}}
                <span *ngIf="foundTask.effort <= 1">Hour</span>
                <span *ngIf="foundTask.effort > 1">Hours</span>
              </dd>
            </dl>
          </div>
          <div class="section">
            <!--DESCRIPTION-->
            <h5 class="mb-3">Description</h5>
            <dl class="row ml-1">
              <p class="col-12">
                {{foundTask.description}}
              </p>
            </dl>
          </div>
          <div class="section">
            <!--ATTACHMENT-->
            <h5 class="mb-3">Attachments</h5>
            <dl class="row ml-1">
              <div class="col-12">
                <ul class="list-group" *ngFor="let attachment of foundTask.attachments">
                  <a href="{{attachment.source}}">
                    <li
                      class="list-group-item d-flex list-group-item-action justify-content-between align-items-center">
                      <span>{{attachment.name}}</span>
                      <i class="fa fa-download"></i>
                    </li>
                  </a>
                </ul>
              </div>
            </dl>
          </div>
          <div class="section">
            <!--COMMENT-->
            <h5 class="mb-3">Comments</h5>
            <dl class="row ml-1">
              <app-comment class="col-12"
                           *ngFor="let comment of foundTask.comments"
                           [comment]="comment"></app-comment>
            </dl>
          </div>
        </div>
        <div class="col-5 offset-1 right-pane">
          <div class="section">
            <!--MEMBER-->
            <h5 class="mb-3">Members</h5>
            <dl class="row ml-1">
              <dt class="col-12">Assignees:</dt>
              <dd class="col-12 pl-4">
                <app-user-list *ngIf="foundTask.assignees" [users]="foundTask.assignees"></app-user-list>
              </dd>
              <dt class="col-12">Creator:</dt>
              <dd class="col-12 pl-4">
                <app-user-list [user]="foundTask.createdBy"></app-user-list>
              </dd>
              <dt class="col-12">Modifier:</dt>
              <dd class="col-12">
                <app-user-list *ngIf="foundTask.changedBy" [user]="foundTask.changedBy"></app-user-list>
                <span *ngIf="!foundTask.changedBy">N/A</span>
              </dd>
            </dl>
          </div>
          <div class="section">
            <!--DATE SECTION-->
            <h5 class="mb-3">Date</h5>
            <dl class="row ml-1">
              <dt class="col-3">Start date:</dt>
              <dd class="col-9">
                <span *ngIf="foundTask.startDate">
                  {{foundTask.startDate | date:'dd/MM/yyyy'}}
                </span>
              </dd>
              <dt class="col-3">Duration:</dt>
              <dd class="col-9">
                {{foundTask.duration}}
                <span *ngIf="foundTask.duration <= 1">Day</span>
                <span *ngIf="foundTask.duration > 1">Days</span>
              </dd>
              <dt class="col-3">Deadline:</dt>
              <dd class="col-9">
                {{foundTask.deadline | date:'dd/MM/yyyy'}}
              </dd>
              <dt class="col-3">Finished:</dt>
              <dd class="col-9">
              <span *ngIf="!foundTask.finishedDate">
                N/A
              </span>
              </dd>
              <dt class="col-3">Created:</dt>
              <dd class="col-9">{{foundTask.createdDate | date:'dd/MM/yyyy'}}</dd>
              <dt class="col-3">Changed:</dt>
              <dd class="col-9">
                <span *ngIf="foundTask.changedDate">
                  {{foundTask.changedDate | date:'dd/MM/yyyy'}}
                </span>
                <span *ngIf="!foundTask.changedDate">
                  N/A
                </span>
              </dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
